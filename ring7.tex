\part[Homological dimension and Serre's theorem]{ホモロジー次元とSerreの定理}
前章で定義した射影分解，$\Tor,\Ext$などの道具を使って可換環の理論にホモロジー代数的手法を持ち込もう．この章では\textbf{ホモロジー次元}とも呼ばれる\textbf{射影次元(projective dimension)}，その双対概念であるところの\textbf{入射次元(injective dimension)}，また\textbf{大域次元(global dimension)}を定義し，５章で予告しておいたとおり\textbf{Serreの定理}（\ref{prethm:Serre}）を証明しよう．

\section{Ext と加群の深さ}
この節ではホモロジー代数の最初の応用として，Cohen--Macaulay性を議論するために必要不可欠な深さの概念について，Extを使った言い換えを与え，ホモロジー代数の道具を用いて考察していく．最初は簡単な場合として正則元とHomのつながりについて調べてみる．

\begin{lem}
	$A$をNoether環とし，$M$を有限生成$A$加群，$I$を$IM\neq M$となる$A$のイデアルとする．このとき，次の条件；
	\begin{sakura}
		\item $M$正則元である$a\in I$が存在する．
		\item 任意の有限生成$A$加群$N$について，$\supp N\subset V(I)$ならば$\hom(N,M)=0$である．
		\item ある有限生成$A$加群$N$が存在して，$\supp N=V(I)$かつ$\hom(N,M)=0$となる．
	\end{sakura}
	は同値である．
\end{lem}

\begin{proof}
	\begin{eqv}[3]
		\item $a$倍写像$a\cdot:M\to M$は単射である．すると，これを合成する線型写像$a\cdot_ \ast:\hom(N,M)\to\hom(N,M)$も単射である．任意の$\varphi\in\hom(N,M)$をとると，$a\cdot_\ast(\varphi)$は$x\mapsto \varphi(ax)$という線型写像であることに注意する．ここで$\supp N=V(\ann N)\subset V(I)$なので，\ref{prop:V(I)の包含}より$I\subset \sqrt{\ann N}$である．よってある$n>0$が存在して$a^nN=0$である．すると$\varphi$に$a\cdot_\ast$を$n$回施すとそれは$0$になり，これは単射なので$\varphi$は$0$でなければならない．
		\item $N=A/I$とすればよい．
		\item $I$は$M$正則元を持たないとする．すると\ref{lem:depth 0とass}より$P\in\ass M\cap V(I)$となる$P\in\spec A$が存在する．このとき単射$A/P\to M$が存在する（$P=\ann x$とするとき，$A/P\to M;a+P\mapsto ax$とすればよい）．これを$P$で局所化して$k(P)\to M_P$が存在する．また，$P\in V(I)=\supp N$であるので$N_P\neq 0$であり，中山の補題より$N_P/PN_P=N\otimes_A k(P)$は$0$でない$k(P)$線型空間である．よって$0$でない$N_P/PN_P\to k(P)$がある．以上のことを組み合わせて$\hom_{A_P}(N_P,M_P)=\hom(N,M)_P\neq0$である．すると\ref{prop:局所化したら0は局所的}より$\hom (N,M)\neq0$であるので矛盾である．
	\end{eqv}
\end{proof}

これを正則列について一般化しよう．

\begin{prop}
	$A$をNoether環とし，$M$を有限生成$A$加群，$I$を$IM\neq M$となる$A$のイデアルとする．任意の$n>0$について，次の条件；
	\begin{sakura}
		\item $n\leq\mdepth_I M$である．
		\item 任意の有限生成$A$加群について，$\supp N\subset V(I)$ならば任意の$0\leq i<n$について$\Ext^i(N,M)=0$である．
		\item ある有限生成$A$加群$N$が存在して，$\supp N=V(I)$かつ任意の$0\leq i<n$について$\Ext^i(N,M)=0$である．
		\item 任意の$0<i<n$について，$a_1,\dots,a_i\in I$が$M$正則列であるならば，ある$a_{i+1},\dots,a_n\in I$が存在して$a_1,\dots,a_n$が$M$正則列をなす．
	\end{sakura}
	は同値である．
\end{prop}

\begin{proof}
	\begin{eqv}[4]
		\item $n$についての帰納法で示す．$n=1$のときは先の補題でみたので，$n>1$とする．$a_1,\dots,a_n\in I$を$M$正則列とする．完全列；
		\[\ses[a_1\cdot]{M}{M}{M/a_1M}\]
		についてExtが導く完全列を考えて；
		\[\begin{tikzcd}{\Ext^{i-1}(N,M/a_1M)}\nxcell[\partial^{i-1}]{\Ext^i(N,M)}\nxcell[a_1\cdot]{\Ext^i(N,M)}\end{tikzcd}\]
		が完全である（$\Ext^i(N,M)$の間の線型写像は$a_1\cdot$が誘導するコホモロジーの間の線型写像だが，これは$a_1\in A$なので$a_1\cdot$のまま変わらない）．ここで$a_2,\dots,a_n$が$M/a_1M$正則列なので$n-1\leq\mdepth_I M/a_1M$だから，帰納法の仮定より$a_1\cdot:\Ext^i(N,M)\to\Ext^i(N,M)$は単射である．また\ref{prop:ExtのAnn}から$\ann N\subset\ann(\Ext^i(N,M))$であるので，補題と同様の議論で$\Ext^i(N,M)=0$である．
		\item $N=A/I$とすればよい．
		\item これも$n$についての帰納法で示す．$n=1$のときは見た．$n>1$とし，$i<n$について$a_1,\dots,a_i\in I$が$M$正則列であるとする．(iii)の条件を満たす有限生成$A$加群$N$と$a_1$倍写像についての完全列が導くExtの完全列；
		\[\begin{tikzcd}
		\Ext^{j}(N,M)\nxcell\Ext^{j}(N,M/a_1M)\nxcell[\partial^i]\Ext^{j+1}(N,M)
		\end{tikzcd}\]
		を考える．$j+1<n$のとき，仮定から完全列の両端は$0$となり，任意の$j<n-1$について$\Ext^j(N,M/a_1M)=0$である．$\supp N=V(I)$であるから，帰納法の仮定から$M/a_1M$正則列$a_2,\dots,a_i\in I$を長さ$n-1$に延長できる．よって，番号のズレに気をつけて$a_1,\dots,a_n\in I$を$M$正則列となるようにできることがわかった．
	\end{eqv}
\end{proof}

この命題から即座に次の定理が従う．
\begin{thm}[Rees]\label{thm:Extとdepth}
	$A$をNoether環とし，$M$を有限生成$A$加群，$I$を$IM\neq M$となる$A$のイデアルとする．$I$の元からなる極大な$M$正則列の長さは一定であり，また；
	\[\mdepth_I M=\inf\mkset{i\in\N}{\Ext^i(A/I,M)\neq0}\]
	である．
\end{thm}

CM局所環とは$\dim A=\mdepth A$となっている環のことであったことを思い出すと，この定義はKrull次元がホモロジカルな量で与えられている局所環のことである，と言い換えることができる．Krull次元をホモロジカルな量に翻訳することで可換環論に新たな視点が持ち込まれ．\textbf{ホモロジカル予想}と呼ばれる一連の予想群が生まれることとなった．これらの予想については本書のところどころで目にすることになるだろう．

\section{ホモロジー次元}

この節ではホモロジー次元を定義し，その基本的な性質について考察する．この章のはじめに述べたとおり，次に定義する射影次元，入射次元はホモロジー次元ともよばれ，Krull次元とは異なり環と加群のホモロジカルな情報を引き出す．射影次元のことをホモロジー代数と呼ぶことも多いが，本書ではホモロジカルな方法で定義される次元のことをまとめてホモロジー次元と呼ぶことにする．

\begin{defi}[射影次元]\index{しゃえいじげん@射影次元}
	$A$を環とし，$M$を$A$加群とする．$M$の射影分解の長さの最小値を$M$の\textbf{射影次元(projective dimension)}といい，$\prjdim_A M$とかく．$M=0$のときは$\prjdim M=-1$とする．
\end{defi}

定義から$\prjdim M\leq 0$であることと$M$が射影的であることは同値である．双対的に入射次元も定義しておこう．

\begin{defi}[入射次元]\index{にゅうしゃじげん@入射次元}
	$M$を$A$加群とする． $M$の入射分解の長さの最小値を$M$の\textbf{入射次元(injective dimension)}といい，$\injdim_A M$とかく．$M=0$のときは$\injdim M=-1$とする．
\end{defi}

定義からホモロジー次元について次が従う．

\begin{lem}
	$A$を環，$M$を$A$加群とする．このとき；
	\begin{sakura}
		\item $\prjdim M\leq n$であるとき，任意の$i>n$と$A$加群$N$について$\Ext^{i}(M,N)=0$である．
		\item $\injdim M\leq n$であるとき，任意の$i>n$と$A$加群$N$について$\Ext^{i}(N,M)=0$である．
	\end{sakura}
	が成り立つ．
\end{lem}

この逆が成り立つだけでなく，$n+1$についてのみ確かめればよいことがわかる（\ref{prop:ホモロジー次元を抑える}）．まず$\Ext$の長完全列を考えることにより次の補題が従うことを注意しておこう．

\begin{lem}
	$A$加群$P$が射影的であることと，任意の$A$加群$N$について$\Ext^1(P,N)=0$であることは同値である．また$I$が入射的であることは任意の$N$について$\Ext^1(N,I)=0$であることと同値である．
\end{lem}

\begin{proof}
	$P$についてのみ示す．$A$加群の完全列；
	\[\ses{M_1}{M_2}{M_3}\]
	から得られる$\Ext$の長完全列；
	\[\begin{tikzcd}
	0\nxcell\hom(P,M_1)\nxcell\hom(P,M_2)\nxcell\hom(P,M_3)\nxcell\Ext^1(P,M_1)\nxcell\cdots
	\end{tikzcd}\]
	を考えれば$\hom(P,-)$が完全関手であることと$\Ext^1(P,M_1)=0$が同値であることがわかる．
\end{proof}

これと全く同様にして，$A$加群$M$が平坦であることと，任意の$A$加群$N$について$\Tor_1(M,N)=0$であることが同値だとわかることを注意しておく．

\begin{prop}\label{prop:ホモロジー次元を抑える}
	$A$を環，$M$を$A$加群とする．このとき；
	\begin{sakura}
	\item $\prjdim M\leq n$であることと，任意の$A$加群$N$について$\Ext^{n+1}(M,N)=0$であることは同値である．
	\item $\injdim M\leq n$であることと，任意の$A$加群$N$について$\Ext^{n+1}(N,M)=0$であることは同値である．
\end{sakura}
が成り立つ．
\end{prop}

\begin{proof}
	(i)のみ示す．$(\Longrightarrow)$は明らかなので，逆を見ればよい．$M$の射影分解$P_\bullet$を考える．$P=\im d_n~(d_n:P_n\to P_{n-1})$とおくと，次の２つの完全列；
	\[\begin{tikzcd}
	0\nxcell P\nxcell P_{n-1}\nxcell[d_{n-1}]P_{n-2}\nxcell\cdots\nxcell P_0\nxcell M\nxcell0\end{tikzcd};\]
	\[\begin{tikzcd}
	\cdots\nxcell P_{n+1}\nxcell[d_{n+1}]P_n\nxcell[d_n]P\nxcell0
	\end{tikzcd}\]
	がある．１つめの完全列より，$P$が射影的ならば$\prjdim M\leq n$が従うので，これを示そう．２つめの完全列を$P$の射影分解とみなすと，$\Ext^1(P,N)=\Ext^{n+1}(M,N)=0$となっており，$P$は射影的である．
\end{proof}

自明ではあるが，この命題の言い換えの形もよく使われるので述べておく．

\begin{cor}\label{cor:ホモロジー次元の判定法不等式ver}
	$A$を環，$M$を$A$加群とする．このとき；
		\begin{sakura}
		\item $n<\prjdim M$であることと，ある$A$加群$N$について$\Ext^{n}(M,N)\neq0$であることは同値である．
		\item $n<\injdim M$であることと，ある$A$加群$N$について$\Ext^{n}(N,M)\neq0$であることは同値である．
	\end{sakura}
	が成り立つ．
\end{cor}

同様にExtの長完全列を考えることで次の２つの命題がわかる．
\begin{cor}\label{cor:prjdimの有限性}
	$A$加群の完全列；
	\[\ses{M_1}{M_2}{M_3}\]
	について，２つの加群の射影元が有限なら残りの１つの射影次元も有限．
\end{cor}

\begin{cor}\label{cor:prjdim lemma}
	$A$加群の完全列；
	\[\ses{M_1}{M_2}{M_3}\]
	について，$\prjdim M_2<\infty$であるとき，$\prjdim M_1=\prjdim M_2$ならば$\prjdim M_3\leq\prjdim M_1+1$であり，$\prjdim M_1>\prjdim M_2$ならば$\prjdim M_3=\prjdim M_1+1$である．
\end{cor}

実際の計算において，Noether局所環$(A,\ideal{m},k)$の上の有限生成加群$M$について，長さが$\prjdim M$であるような（すなわち極小な）射影分解$P_\bullet$が同型を除いて一意的に存在することを示すことができる（\ref{thm:極小自由分解}）．それを証明するために，まずは一般の場合について少し考察してみよう．

\begin{lem}\label{lem:射影次元ステップアップ}
	$A$を環，$M$を射影的でない$A$加群とする．射影加群$P$と全射$\varepsilon:P\to M$について；
	\[\prjdim M=\prjdim \ker\varepsilon+1\]
	である．
\end{lem}

\begin{proof}
	$\prjdim M=n\geq1, K=\ker\varepsilon$とおく．任意の$A$加群$N$について，完全列；
	\[\ses{K}{P}{M}\]
	が誘導する$\Ext$の完全列（$i\geq0$）；
	\[\begin{tikzcd}
	\nxcell\Ext^i(P,N)\nxcell\Ext^i(K,N)\nxcell\Ext^{i+1}(M,N)\nxcell\Ext^{i+1}(P,N)=0\nxcell
	\end{tikzcd}\]
	について，$i>0$とすると$P$が射影的だから$\Ext^i(K,N)\cong\Ext^{i+1}(M,N)$がわかる．よって\ref{prop:ホモロジー次元を抑える}により$n=\infty$なら$\prjdim K=\infty$であるからよい．$n<\infty$のときは$i=n+1$とすれば$\prjdim K\leq n-1$がわかる．
	
	次に上の完全列を$i=0$の場合に考えると，全射；
	\[\Ext^0(K,N)=\hom(K,N)\to \Ext^1(M,N)\]
	が存在するから，すべての$i\geq0$について$\Ext^{i+1}(M,N)\neq0$ならば$\Ext^i(K,N)\neq0$である．
	さて$\prjdim M\not\leq n-1$なので$\Ext^n(M,N')\neq0$となる$A$加群$N'$が存在し，$i=n-1$とすれば$\Ext^{n-1}(K,N')\neq0$がわかる．よって$\prjdim K\not\leq n-2$であり，$\prjdim K=n-1$が成り立つ．
\end{proof}

この補題を繰り返し適用するには$\ker d_n$が射影的にならないような射影分解を構築する必要がある．そこで，次節では射影被覆を導入し，極小な射影分解を定義する．

\section{射影被覆と極小射影分解}

この節では，前節に引き続きホモロジー次元についての基本的な性質を示す．本節の目標はAuslander--Buchsbaumの公式（\ref{thm:Auslander--Buchsbaumの公式}）であり，そのために極小な射影分解を考察する．前節の最後で示した補題を繰り返し適用するために，\textbf{射影被覆}というものを導入しよう．

\begin{defi}[射影被覆]\index{しゃえいひふく@射影被覆}\index{よじょうかぐん@余剰加群}\label{defi:射影被覆}
	$A$を環とし，$M$を$A$加群とする．$M$の部分加群$N$が；
	\[\text{任意の$M$の部分加群$L$について$N+L=M$なら$L=M$．}\]
	を満たすとき，$N$を$M$の\textbf{余剰部分加群(superfluous submodule)}という．$A$加群$M$について射影加群$P$と全射$\varepsilon:P\to M$が存在して$\ker\varepsilon$が$P$の余剰加群のとき，$(P,\varepsilon)$は$M$の\textbf{射影被覆(projective cover)}であるという．
\end{defi}

射影被覆の定義を，余剰部分加群を使わずに射の言葉だけで言い換えよう．
\begin{prop}\label{prop:射影被覆の言い換え}
	$A$を環とする．$A$加群$M$と，射影加群$P$からの全射$\varepsilon:P\to M$があるとする．このとき，以下の条件；
	\begin{sakura}
		\item $\varepsilon:P\to M$は射影被覆である．
		\item 任意の$A$加群$N$と，$A$線型写像$\varphi:N\to P$に対して，$\varepsilon\circ\varphi$が全射ならば$\varphi$は全射である．
		\item 任意の$A$線型写像$\varphi:P\to P$に対して，$\varepsilon\circ\varphi=\varepsilon$ならば$\varphi$は同型である．
	\end{sakura}
	は同値である．
\end{prop}

\begin{proof}
	\begin{eqv}[3]
		\item 	任意の$x\in P$についてある$y\in N$が存在して$\varepsilon(\varphi(y))=\varepsilon(x)$である．すると$x-\varphi(y)\in\ker\varepsilon$なので，$\ker\varepsilon+\im\varphi=P$となり，$\ker\varepsilon$が$P$の余剰部分加群だから$\im\varphi=P$である．
		\item 仮定より$\varphi$は全射なので，$P$が射影的だから$\varphi\circ\psi=\id_P$となる$\psi:P\to P$が存在する．すると，次の図式；
		\[\begin{tikzcd}
			P\darrow[\psi]\arrow[rd,"\id"]\\
			P\darrow[\varepsilon]\nxcell[\varphi]P\arrow[ld,"\varepsilon"]\\
			M
		\end{tikzcd}\]
		が可換なので，$\varepsilon=\varepsilon\circ\psi$だから(ii)より$\psi$は全射となり，$\varphi,\psi$は同型である．
		\item $L$を$L+\ker\varepsilon=P$となる$P$の部分加群とする．自然な包含$\iota:L\to P$を考えると，$\varepsilon\circ\iota:L\to M$は全射である．すると，$P$が射影的なのである$f:P\to L$が存在して；
		\[\begin{tikzcd}
			P\darrow[f]\arrow[rd,"\varepsilon"]\\
			L\darrow[\iota]\nxcell[\varepsilon\circ\iota]M\nxcell0\\
			P\arrow[ur,"\varepsilon"]
		\end{tikzcd}\]
		が可換である．よって$\iota\circ f$は同型で，特に$\iota$は全射である．ゆえに$L=P$である．
	\end{eqv}
\end{proof}

この言い換えにより，射影被覆は存在すれば同型を除いて一意であることがわかる．
\begin{prop}\label{prop:射影被覆は存在すれば一意}
	$A$を環とする．$A$加群$M$の射影被覆$\varepsilon:P\to M$は，もし存在すれば同型を除いて一意に定まる．
\end{prop}

\begin{proof}
	$M$が射影被覆$\varepsilon:P\to M$を持つとする．ここで射影加群$P'$が存在して，$\varepsilon':P'\to M$も射影被覆になっていると仮定しよう．すると，$P'$が射影的だから，次の図式；
	\[\begin{tikzcd}
		P'\arrow[d,dashed,"f"]\arrow[rd,"\varepsilon'"]\\
		P\nxcell[\varepsilon]M\nxcell0
	\end{tikzcd}\]
	を可換にするような$f:P'\to P$が存在する．この図式の$P,P'$を入れ替えれば$g:P\to P'$が存在して，それぞれ$\varepsilon'=\varepsilon\circ f, \varepsilon=\varepsilon'\circ g$である．すると$\varepsilon=\varepsilon\circ(f\circ g)$なので，射影被覆の言い換えから$f\circ g$は同型であり，また入れ替えれば$g\circ f$も同型である．よってそれぞれ全単射で，$P\cong P'$がわかる．
\end{proof}

しかしながら，一般には射影被覆が存在するかどうかわからないという問題がある（\ref{ex:射影被覆が存在しない例}を見よ．双対概念である入射包絡（\ref{defi:入射包絡}）は必ず存在する）．すると，次に定義する\textbf{極小射影分解}が必ず存在するかわからないという問題が残ってしまう．

\begin{defi}[極小射影分解]\index{きょくしょうしゃえいぶんかい@極小射影分解}\label{defi:極小射影分解}
	$A$を環とし，$M$を$A$加群とする．$M$の射影分解；
	\[\begin{tikzcd}
		\cdots\nxcell P_1\nxcell[d_1] P_0\nxcell[d_0]0
	\end{tikzcd}\]
	について，各$d_i:P_i\to\ker d_{i-1}$（$i=0$については全射$\varepsilon:P_0\to M$が射影被覆とし，$d=1$については$d_1:P_i\to\ker\varepsilon$が射影被覆とする）が射影被覆であるとき，これを\textbf{極小射影分解(minimal projective resolution)}であるという．
\end{defi}

射影被覆は存在すれば同型を除いて一意に定まるので，$M$の極小射影分解は存在すれば同型である．これが極小であることを示すために次の補題を用意する．

\begin{lem}
	$A$を環，$M$を射影的$A$加群とする．このとき，$M$の射影被覆$P$が存在すれば$M$と同型である．
\end{lem}

\begin{proof}
	全射$\varepsilon:P\to M$があり，$\ker\varepsilon$は$P$の余剰部分加群になっているとする．$M$は射影的なので，図式；
	\[\begin{tikzcd}
	M\arrow[d,"\varphi",dashed]\arrow[rd,"\id"]\\
	P\nxcell[\varepsilon]M\nxcell0 
	\end{tikzcd}\]
	を可換にする$\varphi:M\to P$があり，$\varepsilon$は分裂全射である．よって$P=\ker\varepsilon+M$であるが，射影被覆であったことから$P=M$となる．
\end{proof}

\begin{prop}
	$A$加群$M$について，$M$は射影的でないとする．$M$の極小射影分解$P_\bullet$が存在して，長さ$n$であるとする．このとき$\prjdim M=n$である．
\end{prop}

\begin{proof}
	まず，$\varepsilon:P_0\to M$は射影被覆である．$M$は射影的でないので，\ref{lem:射影次元ステップアップ}より；
	\[\prjdim M=\prjdim\ker\varepsilon+1\]
	である．さて，$d_1:P_1\to\ker\varepsilon$は射影被覆である．ここでもし$\ker\varepsilon$が射影的であるとすると，補題から$P_1=\ker\varepsilon$であり；
	\[\begin{tikzcd}
	0\nxcell P_1\nxcell P_0\nxcell[\varepsilon]M\nxcell0 
	\end{tikzcd}\]
	が完全となるので矛盾．ゆえに$\ker\varepsilon$は射影的でなく，\ref{lem:射影次元ステップアップ}から；
	\[\prjdim M=\prjdim \ker d_1+2\]
	である．これを続けていくと，$\prjdim \ker d_{n-2}=\prjdim \ker d_{n-1}+1$，すなわち；
	\[\prjdim M=\prjdim \ker d_{n-1}+n\]
	までは問題なく続けることができる．さて仮定から；
	\[\begin{tikzcd}
	0\nxcell P_n\nxcell[d_n]P_{n-1}\nxcell[d_{n-1}]\cdots 
	\end{tikzcd}\]
	は完全で，$P_n\cong\ker d_{n-1}$となる．すると$\ker d_{n-1}$は$0$でない射影加群だから$\prjdim\ker d_{n-1}=0$であり$\prjdim M=n$となることがわかった．
\end{proof}

もし長さが無限である（任意の$P_n$が$0$でない）ような極小射影分解が存在すれば，証明から\ref{lem:射影次元ステップアップ}を無限に適用できるので，この命題は$\prjdim M=\infty$の場合も成り立っている．これにより，極小射影分解を見つけることができれば$\prjdim M$を決定することができることがわかった．先程も述べたように最大の問題は射影被覆が存在するかわからないというところにあるが，Noether局所環上の有限生成加群については極小射影分解になるような射影分解が必ず存在することがわかる．

\begin{thm}[極小自由分解]\index{きょくしょうじゆうぶんかい@極小自由分解}\label{thm:極小自由分解}
	Noether局所環$(A,\ideal{m},k)$上の有限生成加群$M$の射影分解$P_\bullet$であって，次の条件；
	\begin{sakura}
		\item $P_\bullet$は極小射影分解である．
		\item 各$P_i$は有限生成な自由加群である．
		\item $P_0\otimes k=M\otimes k=M/\ideal{m}M$である．
	\end{sakura}
	をみたすものが存在する．これを$M$の\textbf{極小自由分解(minimal free resolution)}という．特に極小射影分解であるから，同型を除いて一意に定まる．
\end{thm}

\begin{proof}
	$M\otimes k=M/\ideal{m}M$の$k$線型空間としての生成系$\{e_i\}$
	との代表元$u_i\in M$を固定し，$P_0=\oplus Ae_i$とおく．このとき，次の$A$線型写像；
	\[\varepsilon:P_0\to M;e_i\mapsto u_i\]
	を考えると，これは全射である．実際$M=\im\varepsilon+\ideal{m}M$であることが容易に確かめられ，中山の補題より$M=\im\varepsilon$であることがわかる．またこれは射影被覆になる．これも$\ker\varepsilon\subset\ideal{m}P_0$であることに注意して中山の補題から従う．同様に$\ker\varepsilon$について射影被覆$d_1:P_1\to\ker\varepsilon$がとれる．これを繰り返して完全列；
	\[\begin{tikzcd}
	\cdots\nxcell P_2\nxcell[d_2]P_1\nxcell[d_1]P_0\nxcell[\varepsilon]M\nxcell0
	\end{tikzcd}\]
	を得，各$\ker d_i$は$P_i$の余剰部分加群である．よって$P_\bullet$を各$P_i$が自由でありかつ極小射影分解となっているようにとることができた．
\end{proof}

ここから射影次元を次のように言い換えることができる．

\begin{thm}\label{thm:射影次元の言い換え}
	$(A,\ideal{m})$をNoether局所環とし，$M\neq0$をその上の有限生成加群とする．このとき；
	\[\prjdim M=\sup\mkset{i\in N}{\Tor_i(M,A/\ideal{m})\neq0}\]
	である．
\end{thm}

ここから，ある$n\geq0$を固定したとき，ある$i\geq n$について$\Tor_i(M,A/\ideal m)\neq0$ならば$n\leq i\leq\prjdim M$であることがわかり，対偶をとって$\prjdim M<n$ならばすべての$i\geq n$について$\Tor_i(M,A/\ideal m)=0$である．これを一般化したものがホモロジカル予想の１つ，\textbf{剛性(rigidty)}\textbf{予想}である．

\begin{conj}[剛性予想]
	$(A,\ideal m)$を局所環とし，$M,N$を有限生成$A$加群とする．$\prjdim M<\infty$かつ$\Tor_n(M,N)=0$となる$n$が存在するならば，任意の$i\geq n$について$\Tor_i(M,N)=0$であろう．
\end{conj}

$A$が正則局所環のときには\cite{Lichtenbaum1966}によって証明されている．その他いくつかの条件のもとでは成り立つことがわかっているが，一般には反例が存在する（\cite{Heitmann1993}）．一方$\prjdim N<\infty$も仮定すると未解決である．

また，次のように驚くべき性質を示すことができる．

\begin{prop}\label{prop:Noether局所環上では自由なり射影なり同値}
	$(A,\ideal{m})$をNoether局所環とし，$M$をその上の加群とする．このとき，次の条件；
	\begin{sakura}
		\item $M$は自由である．
		\item $M$は射影的である．
		\item $M$は平坦である．
		\item $\Tor_1(A/\ideal m,M)=0$である．
	\end{sakura}
	は同値である．
\end{prop}

\begin{proof}
	(iv)が(i)を導くことのみ見れば良い．極小自由分解の構成と同じように$\varepsilon:P_0\to M$を構成する．$\varepsilon$は全射であったので，$\Tor_1(A/\ideal m,M)=0$ならば$\ker\varepsilon=0$であることを示す．完全列；
	\[\ses{\ker\varepsilon}{P_0}{M}\]
	に$-\otimes A/\ideal m$を作用させて，Torの長完全列；
	\[\begin{tikzcd}
	\cdots\nxcell\Tor_1(A/\ideal m,M)\nxcell\ker\varepsilon\otimes A/\ideal{m}\nxcell P_0\otimes A/\ideal{m}\nxcell M\otimes A/\ideal{m}\nxcell0
	\end{tikzcd}\]
	を得る．$P_0$の構成から$P_0\otimes A/\ideal{m}=M\otimes A/\ideal{m}$であるので，$\Tor_1(A/\ideal m,M)=0$だから$\ker\varepsilon\otimes A/\ideal{m}=\ker\varepsilon/\ideal{m}\ker\varepsilon=0$である．よって中山の補題から$\ker\varepsilon=0$である．
\end{proof}

このようにNoether局所環上の有限生成加群では射影的であることと自由であることが同値になるが，Noether性という条件は外すことができる（それだけでなく有限生成である必要すらないが，長くなるのでここでは省く．\cite{Matsumura1980}，定理2.5 をみよ）．

\begin{thm}
	$(A,\ideal{m})$を局所環，$M$を有限生成$A$加群とする．このとき，$M$が射影加群であることと自由加群であることは同値である．
\end{thm}

\begin{proof}
	$M$を射影加群とする．極小自由分解の構成から，有限生成自由加群$P_0$からの全射$\varepsilon:P_0\to M$が存在する．前命題と同様の議論から$\ker\varepsilon\otimes A/\ideal m=0$である（ここまでNoether性は要らず，$\ker\varepsilon$が有限生成であることにNoether性を使った）．ここで射影的であることと自由加群の直和因子であることは同値であったことと，その証明（\ref{thm:射影的と自由の直和因子は同値}）を思い出すと，$P_0\cong M\oplus\ker\varepsilon$であるので，とくに$\ker\varepsilon\cong P_0/M$であり，$P_0$は有限生成自由加群なので$\ker\varepsilon$も有限生成である．よって中山の補題が使えて$\ker\varepsilon=0$である．
\end{proof}

\begin{thm}[Auslander--Buchsbaumの公式]\index{#Auslander--Buchsbaumのこうしき@Auslander--Buchsbaumの公式}\label{thm:Auslander--Buchsbaumの公式}
	$(A,\ideal m)$をNoether局所環とし，$M\neq 0$をその上の射影次元有限な有限生成加群とする．このとき；
	\[\prjdim M+\mdepth M=\mdepth A\]
	が成り立つ．
\end{thm}

\begin{proof}
	$d=\mdepth A$とおく．$r=\prjdim M$についての帰納法で示す．$r=0$のとき，$M$は前定理より自由加群だから，$\mdepth M=\mdepth A$である．
	
	$r=1$のときは，$M$の極小自由分解を考えて；
	\[\ses{P_1}{P_0}{M}\]
	とする．$\Ext^{d-1}(A/\ideal m,M)\neq0$を示す．
	\[\begin{tikzcd}
	0\nxcell\Ext^{d-1}(A/\ideal m,M)\nxcell\Ext^d(A/\ideal m,P_1)\nxcell\Ext^d(A/\ideal m,P_0)\nxcell\cdots
	\end{tikzcd}\]
	において$\Ext^d(A/\ideal m,P_1)\to\Ext^d(A/\ideal m,P_0)$を考える．$d_1:P_1\to P_0$において極小自由分解の構成から$\im d_1=\ker \varepsilon\subset\ideal{m}P_0$であったので，$P_1\to P_0$の誘導する$\hom(A/\ideal m,P_1)\to\hom(A/\ideal m,P_0)$は$0$である．実際，任意の$f:K\to P_1$に対して，$d_1(f(k))\subset\ideal{m}P_0$であり，これに$k$をテンソルすると$d_1(f(k))/\ideal{m}d_1(f(k))\subset\ideal{m}(M/\ideal{m}M)=0$であるから$d_1(f(k))=\ideal{m}d_1(f(k))$となり，中山の補題から$d_1(f(k))=0$である．ゆえにゼロ射の持ち上げだから$\Ext^d(A/\ideal m,P_1)\to\Ext^d(A/\ideal m,P_0)$は$0$であり，上の完全列から$\Ext^{d-1}(A/\ideal m,M)=\Ext^d(A/\ideal m,P_1)\neq0$である．
	
	次に$1<r$とし，$r-1$まで成立しているとする．適当な$n$について全射$A^n\to M$が存在し，その核を$K$とおけば；
	\[\ses{K}{A^n}{M}\]
	が完全である．\ref{cor:prjdim lemma}より$\prjdim K=r-1$である．帰納法の仮定から$\mdepth K=d-r+1$である．よって$\mdepth M=d-r$を示せばよい．\ref{thm:Extとdepth}より$i<d-r+1$なら$\Ext^i(A/\ideal m,K)=0,\Ext^{d-r+1}(A/\ideal m,K)\neq0$である．上の完全列が導く$\Ext$の長完全列；
	\[\begin{tikzcd}[column sep=scriptsize]
	\cdots\nxcell\Ext^i(A/\ideal m,A^n)\nxcell\Ext^i(A/\ideal m,M)\nxcell\Ext^{i+1}(A/\ideal m,K)\nxcell\Ext^{i+1}(A/\ideal m,A^n)\nxcell\cdots
	\end{tikzcd}\]
	を考えると，$i<d-r$ならば$i+1<d-r+1\leq d$なので；
	\[\begin{tikzcd}
	0\nxcell\Ext^i(A/\ideal m,M)\nxcell\Ext^{i+1}(A/\ideal m,K)\nxcell0
	\end{tikzcd}\]
	となり$\Ext^i(A/\ideal m,M)=\Ext^{i+1}(A/\ideal m,K)=0$である．また$i=d-r$のとき；
	\[\begin{tikzcd}
	0\nxcell\Ext^{d-r}(A/\ideal m,M)\nxcell\Ext^{d-r+1}(A/\ideal m,K)\nxcell\Ext^{d-r+1}(A/\ideal m,A^n)\nxcell\cdots
	\end{tikzcd}\]
	であり，$r>1$だから$d-r+1<d$となり$\Ext^{d-r}(A/\ideal m,M)=\Ext^{d-r+1}(A/\ideal m,K)\neq0$である．
	
	以上を組み合わせて証明が完了した．
\end{proof}

\section{大域次元とSerreの定理}

この節では，環の\textbf{大域次元(global dimension)}を導入して，Serreによる正則局所環の特徴づけとSerreの定理（\ref{prethm:Serre}）の証明を行おう．まず次の事実を注意しておく．

\begin{prop}
	$A$を環とする．$\sup\mkset{\prjdim M}{M:A\in\Mod}=\sup\mkset{\injdim M}{M\in\mathbf{Mod}(A)}$である．
\end{prop}

\begin{proof}
	$s=\gldim A, t=\sup\mkset{\injdim M}{M\in\mathbf{Mod}(A)}$とおく．まず$s=\infty$であるとすると，任意の$n\geq 0$に対して$n<\prjdim M$なる$A$加群$M$が存在する．すると\ref{cor:ホモロジー次元の判定法不等式ver}よりある$A$加群$N$が存在して$\Ext^{n+1}(M,N)\neq 0$となり，これは$n<\injdim M$を意味する．よって$t$も有限ではありえない．
	
	次に$s<\infty$であるとする．$s<t$すなわち$s<\injdim M$なる$A$加群$M$があるとすると，ある$A$加群$N$が存在して$\Ext^{s+1}(N,M)\neq 0$であるので，これは$s<\prjdim N$を導き矛盾する．同様に$s>t$を仮定すると，$t<\injdim N$であるような$N$が存在して矛盾する．
\end{proof}	

これによって定まる量を環の大域次元という．

\begin{defi}[大域次元]\index{たいいきじげん@大域次元}
	環$A$について；
	\[\gldim A=\sup\mkset{\prjdim M}{M:A\in\Mod}=\sup\mkset{\injdim M}{M\in\mathbf{Mod}(A)}\]
	と定義する．これを$A$の\textbf{大域次元(global dimension)}という．
\end{defi}

大抵の環は$\gldim A=\infty$なので，大域次元が有限となる環に興味がある．大域次元は$A$のイデアルによる商環のみを確かめればよいことを示そう．

\begin{prop}\label{prop:injdimのイデアルによる判定}
	$A$を環，$M$を$A$加群とする．このとき，与えられた$n$について$\injdim M\leq n$であることと，任意の$A$のイデアル$I$について$\Ext^{n+1}_A(A/I,M)=0$であることは同値である．
\end{prop}

\begin{proof}
	$A$加群$M$が入射的であることと，任意の$A$のイデアル$I$について$\Ext^1(A/I,M)=0$であることが同値であることを示せば十分である．$M$が入射的なら$\Ext^1$が消えることは明らかなので，逆を見ればよい．Baerの判定法（\ref{thm:Baer's Criterion}）より，$\hom(-,M)$が自然な$0\to I\to A$の完全性を保てばよい．それは完全列；
	\[\ses{I}{A}{A/I}\]
	に対して$\hom(-,M)$が導く長完全列；
	\[\begin{tikzcd}
	0\nxcell \hom(A/I,M)\nxcell\hom(A,M)\nxcell\hom(I,M)\nxcell\Ext^1(A/I,M)=0\nxcell\cdots
	\end{tikzcd}\]
	より成り立つことがわかり，$M$は入射的である．
\end{proof}

\begin{cor}[Auslander]\label{cor:大域次元は商環だけでok}
	$\gldim A=\sup\mkset{\prjdim A/I}{I:A\text{のイデアル}}$が成り立つ．
\end{cor}

\begin{proof}
	右辺を$n$とおく．明らかに$n\leq\gldim A$だから逆をみればよい．$n<\infty$としてよい．任意の$A$加群$N$について，$\Ext^{n+1}(A/I,N)=0$であるので，先の命題から$\injdim N\leq n$である．よって任意の$A$加群$M$について$\Ext^{n+1}(M,N)=0$であり，$\prjdim M\leq n$である．よって示された．
\end{proof}

Noether性を課すことでさらに話は簡単になる．

\begin{thm}\label{thm:Noether局所環の大域次元}
	$(A,\ideal{m})$をNoether局所環とする．このとき$\gldim A=\prjdim A/\ideal{m}$である．
\end{thm}

\begin{proof}
$\prjdim A/\ideal{m}=\infty$なら明らかであるので，有限であると仮定する．$n=\prjdim A/\ideal m$とおき，任意の有限生成$A$加群$M$について$\prjdim M\leq n$であることを，$\dim M$についての帰納法で示す（\ref{cor:大域次元は商環だけでok}により$M$は有限生成に限ってよい）．

$\dim M=0$とする．このとき$M$を$A/\ann M$加群とみると，$M$はNoetherかつArtin加群なので組成列；
\[0=M_0\subsetneq M_1\subsetneq\dots\subsetneq M_r=M\]
を持つ（\ref{prop:有限な組成列の同値条件}）．$A/\ann M$は唯一の極大イデアルを$\ideal{m}$とする局所環であるから，\ref{prop:単純加群の構造}により各$1\leq i\leq r$について$M_i/M_{i-1}\cong A/\ideal m$である．よって；
\[\ses{M_{i-1}}{M_i}{A/\ideal m}\]
が完全である．任意の$A$加群$N$について$\Ext^{n+1}(A/\ideal m,N)=0$であるので，$i=1$から順に考えて$\Ext^{n+1}(M,N)=0$である．よって$\prjdim M\leq n$である．

次に$d=\dim M>0$とし，$d-1$まで正しいと仮定する．まずは$\mdepth M>0$のときを考えると，$M$正則元$a\in\ideal m$が存在する．このとき$\dim M/aM=\dim M-1$である．よって帰納法の仮定から$\prjdim M/aM\leq n$である．次の完全列；
\[\ses[a\cdot]{M}{M}{M/aM}\]
が誘導するExtの長完全列を考えると，任意の$A$加群$N$について$\Ext^{n+1}(M/aM,N)=0$であり；
\[\begin{tikzcd}
	\Ext^n(M/aM,N)\nxcell\Ext^n(M,N)\nxcell[a\cdot]\Ext^n(M,N)\nxcell\Ext^{n+1}(M/aM,N)=0
\end{tikzcd}\]
から$a\Ext^n(M,N)=\Ext^n(M,N)$であるので，中山の補題から$\Ext^n(M,N)=0$である．よって$\prjdim M\leq n-1$である．

次に$\mdepth M=0$と仮定する．$\Gamma_{\ideal{m}}(M)=\mkset{x\in M}{\text{ある}n\geq 0\text{について}\ideal{m}^nx=0\text{である．}}$とおく．\ref{lem:depth 0とass}を局所環の場合に考えると$\mdepth M=0$であることと$\ideal m\in\ass M$であることは同値であるから，これは$0$ではない．短完全列；
\[\ses{\Gamma_{\ideal{m}}(M)}{M}{M/\Gamma_{\ideal{m}}(M)}\]
を考えよう．まず$\dim \Gamma_{\ideal{m}}(M)=0$であることを示す．$\Gamma_{\ideal{m}}(M)$の生成系$\{u_1,\dots,u_r\}$をとる．各$i$について$\ideal{m}^{n_i}u_i=0$となる$n_i$がある．その最大値を$n$とすれば$\ideal{m}^n\subset\ann \Gamma_{\ideal{m}}(M)$である．よって\ref{prop:局所環がm^n=0ならArtin}より$A/\ann \Gamma_{\ideal{m}}(M)$はArtin，すなわち$\dim \Gamma_{\ideal{m}}(M)=0$である．よって$\prjdim \Gamma_{\ideal{m}}(M)\leq n$となる．ゆえに$M=\Gamma_{\ideal{m}}(M)$のときは題意が正しい．そうでないとしたとき，$M/\Gamma_{\ideal{m}}(M)$について$\mdepth M/\Gamma_{\ideal{m}}(M)>0$であることを示す．\ref{lem:depth 0とass}より$\ideal m\not\in\ass M/\Gamma_{\ideal{m}}(M)$であることを示せばよい．ある$x\in M$について$\ideal m=\ann (x+\Gamma_{\ideal{m}}(M))$であるとする．$\ideal m$の生成系$\{a_i\}$をとれば，任意の$i$について$a_i\ideal{m}^{n_i}x=0$となる$x_i$がとれるので，最大値を$n$として$\ideal{m}\cdot \ideal{m}^nx=\ideal{m}^{n+1}x=0$である．よって$x\in \Gamma_{\ideal{m}}(M)$となる．ゆえに$\ideal m\not\in\ass M/\Gamma_{\ideal{m}}(M)$となり，$\mdepth M/\Gamma_{\ideal{m}}(M)>0$である．よって$\prjdim M/\Gamma_{\ideal{m}}(M)\leq n-1$である．よって，$\Ext^{n+1}(M/\Gamma_{\ideal{m}}(M),N)=\Ext^{n+1}(\Gamma_{\ideal{m}}(M),N)=0$であるから$\Ext^{n+1}(M,N)=0$となり$\prjdim M\leq n$である．
\end{proof}

証明中に登場する$\Gamma_{\ideal{m}}(M)$は左完全関手であり，これが導く右導来関手は\textbf{局所コホモロジー}と呼ばれることを注意しておく．

Auslander--Buchsbaumの公式（\ref{thm:Auslander--Buchsbaumの公式}）より容易に次の補題を得る．

\begin{lem}\label{lem:prjdim M/aM}
	$(A,\ideal{m})$をNoether局所環とし，$M$をそのうえの有限生成$A$加群とする．$M$正則元$a\in\ideal{m}$について；
	\[\prjdim M/aM=\prjdim M+1\]
	が成り立つ．
\end{lem}

\begin{proof}
	まず$\prjdim M=\infty$のときを考える．もし$\prjdim M/aM=n<\infty$ならば，短完全列；
	\[\ses[a\cdot]{M}{M}{M/aM}\]
	を考えて$\Ext^{n+1}(M/aM,N)=0$であるから，先の定理と同様に$\Ext^n(M,N)=0$となり仮定に反する．よって$\prjdim M/aM=\infty$となり仮定は成り立つ．
	
	次に有限個の場合を考えよう．$\prjdim M=n<\infty$とおく．\ref{cor:prjdimの有限性}より$\prjdim M/aM$も有限である．よってAuslander--Buchsbaumの公式から；
	\[\prjdim M/aM=\mdepth A-\mdepth M/aM=\mdepth A-(\mdepth A-1)=\prjdim M+1\]
	であることがわかる．
\end{proof}

また，$a\in\ideal m$が$A$正則という条件を足すことで$A/aA$加群としての射影次元を上から抑えることができる．

\begin{lem}\label{lem:prjdim_A/aA M/aM}
	$(A,\ideal{m})$をNoether局所環とし，$M$をそのうえの有限生成$A$加群とする．$M$正則元$a\in\ideal{m}$について$A$正則でもあるならば；
	\[\prjdim_{A/aA} M/aM\leq \prjdim_A M\]
	が成り立つ．
\end{lem}

\begin{proof}
	$h=\prjdim_A M$とおく．$h<\infty$と仮定してよい．$h$についての帰納法で示す．$h=0$のとき，$M$は自由なので$M\cong A^n$とすると$M/aM\cong(A/aA)^n$より$A/aA$加群として自由だから$\prjdim_{A/aA}M/aM=0$となり正しい．$h>1$とし，$h-1$まで正しいと仮定する．自由加群からの全射$\varphi:F\to M$を考えよう．次の図式；
	\[\begin{tikzcd}
		0\nxcell\ker\varphi\darrow[a\cdot]\nxcell F\darrow[a\cdot]\nxcell[\varphi]M\darrow[a\cdot]\nxcell0\\
		0\nxcell \ker\varphi\nxcell F\nxcell[\varphi]M\nxcell0
	\end{tikzcd}\]
	を考える．$a$は$M$正則だから$a\cdot:M\to M$は単射で，蛇の補題から；
	\[\ses{\ker\varphi/a\ker\varphi}{F/aF}{M/aM}\]
	が完全．\ref{cor:prjdim lemma}より$\prjdim\ker\varphi=h-1$だから，帰納法の仮定から$\prjdim_{A/aA}\ker\varphi/a\ker\varphi\leq h-1$である．再び\ref{cor:prjdim lemma}より$\prjdim_{A/aA}\ker\varphi/a\ker\varphi=\prjdim_{A/aA}M/aM-1$なので$\prjdim_{A/aA}M/aM\leq h-1+1=h$である．
\end{proof}


\ref{lem:prjdim M/aM}により次の定理が従う．

\begin{thm}[Auslander--Buchsbaum]
	$(A,\ideal m)$を$d$次元の正則局所環とすると，$\gldim A=d$である．
\end{thm}

\begin{proof}
	$x_1,\dots,x_d\in\ideal{m}$を正則巴系とすると，これは$A$正則列をなし$\prjdim A/\ideal m=\prjdim A+d=d$である．よって\ref{thm:Noether局所環の大域次元}より$\gldim A=\prjdim A/\ideal m=d$である．
\end{proof}

驚くべきはこれの逆が成り立つ．すなわち，局所環の大域次元が有限であることと正則であることは同値である．

\begin{thm}[Serre]
	$(A,\ideal m,k)$を$\gldim A=d<\infty$となるNoether局所環とする．このとき$A$は$d$次元の正則局所環である．
\end{thm}

\begin{proof}
	$d=\gldim A$とおく．また$r=\emdim A=\dim_k\ideal m/\ideal{m}^2$とおこう．まず$r=0$とする．$\ideal m=\ideal{m}^2$であるので，中山の補題から$\ideal m=0$である．よって$A$は体となり，$\gldim A=\prjdim A=0$なので題意が成り立つ．逆に$\gldim A=0$とすると，$\prjdim k=0$となり$k$は自由だから$k\cong A$となり，$A$は体となる．
	
	よって$r,d>0$と仮定してよい．$r$についての帰納法で示す．$r-1$まで正しいとしよう．$\ideal m\neq0$であり，中山の補題から$\ideal m\neq\ideal{m}^2$である．まず$a\in\ideal m\setminus\ideal{m}^2$を$A$正則にとれることを示す．任意の$a$が$A$正則でないと仮定する．すると$\ideal{m}\setminus\ideal{m}^2\subset\bigcup_{P\in\ass A}P$である．よって$\ideal m\subset\bigcup_{P\in\ass A}P\cup\ideal{m}^2$であるので，Prime avoidanceからある$P\in\ass A$について$\ideal{m}\subset P$である（$\ideal m\not\subset\ideal{m}^2$であるから）．$\ideal{m}$は極大なので$\ideal m\in\ass A$となり，単射$k\hookrightarrow A$が存在する（$\ideal m=\ann x$としたとき$a+\ideal m\mapsto ax$とすればよい）．よって短完全列；
	\[\ses{k}{A}{A/k}\]
	について，$\Tor_d(A,k)=\Tor_{d+1}(A,k)=0,\Tor_d(k,k)\neq0$だからTorの長完全列を考えて；
	\[\begin{tikzcd}
		0\nxcell\Tor_{d+1}(A/k,k)\nxcell\Tor_d(k,k)\nxcell0
	\end{tikzcd}\]
	が完全であり$\Tor_{d+1}(A/k,k)\neq0$となるので\ref{thm:射影次元の言い換え}より$d+1\leq\prjdim A/k$であるが，これは$d=\gldim A$であるので矛盾．
	
	このとき，$A/aA$が$\emdim A/aA=r-1$となる大域次元有限な環であることを示そう．$r=\dim_k \ideal m/\ideal{m}^2$であるので，$a_1,\dots,a_r\in\ideal m$を$a_i+\ideal{m}^2$が$\ideal m/\ideal{m}^2$の基底になるようにとれる．ここで$a_1=a$としてよい．$I=(a_2,\dots,a_r)$とおくと，$aA+I=\ideal m$であり，$\emdim A/aA=\dim_k (\ideal{m}/aA)/(\ideal{m}/aA)^2=r-1$である．また$\ideal m/aA=(aA+I)/aA\cong I/(I\cap aA)$である．ここで任意の$ab\in aA\cap I$をとると，ある$c_i\in A$により$ab=c_2a_2+\dots+c_ra_r$とかけている．よって$ba_1-c_2a_2-\dots-c_ra_r=0$である．これを$k$加群$\ideal m/\ideal{m}^2$におとすと，$a_i+\ideal{m}^2$は線型独立であるからすべての係数は$k$でゼロ，つまり$b,c_i\in\ideal{m}$でなければならない．よって$I\cap aA\subset a\ideal{m}$である．よって；
	\[\ideal m/a\ideal m\to\ideal m/aA=I/(I\cap aA)\to\ideal m/a\ideal m\]
	が恒等だから$\ideal m/a\ideal m\to \ideal m/aA$は分裂する．よって$\ideal m/aA$は$\ideal m/a\ideal{m}$の直和因子である．ゆえに$\prjdim_{A/aA}\ideal m/aA\leq\prjdim_{A/aA}\ideal m/a\ideal{m}$であり，\ref{lem:prjdim_A/aA M/aM}より；
	\[\prjdim_{A/aA} k-1=\prjdim_{A/aA}\ideal m/aA\leq\prjdim_A \ideal m=\prjdim_A k-1\]
	よって$\gldim A/aA<\infty$であり，帰納法の仮定から$A/aA$は正則である．ゆえに$\dim A/aA=d-1$となり，$\dim A=\dim A/aA+1$だから$A$も$d$次元の正則局所環である．最後に前の定理を使えばよい．
\end{proof}

これが可換環論にホモロジー代数を導入したことによる大結果の最初の１つである．この定理により次の定理がほぼ自明と化した．
\begin{thm}[Serreの定理]\index{#Serreのていり@Serreの定理}\label{thm:Serreの定理}
	$A$を正則局所環とすると，任意の$P\in\spec A$について$A_P$も正則局所環である．
\end{thm}

\begin{proof}
	前定理から$\prjdim_A A/P<\infty$であり，有限な極小自由分解を得る．これを$P$で局所化して$A_P/PA_P$の極小自由分解を得て，$\prjdim_{A_P} A_P/PA_P<\infty$であることがわかる．
\end{proof}



