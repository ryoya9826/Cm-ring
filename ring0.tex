\setcounter{part}{-1}
\part[Definition of Ring and more...]{環の基礎（かけあし）}
\section{環の定義}

環について,非常に圧縮してではあるが基礎事項を説明しておこう.この節は環について一通り知っている人を対象に書くため,\textbf{環に可換性を仮定する}. 可換でない環は\textbf{非可換環}と呼ばれ,これは\textbf{作用素環}(operator algebra)などが有名で,こちらも活発な研究が行われている.
\begin{defi}[環]\index{かん@環}
	集合$R$に対し2つの演算$x+y,x*y$が備わっていて,次の性質を満たすとき,代数構造$(R,+,*)$を\textbf{環}(ring)という.
	\begin{defiterm}{R}
		\item $R$は$+$についてAbel群である.
		\item 任意の$x,y,z\in R$に対し,~$x*(y*z)=(x*y)*z$が成立する.
		\item ある$1\in R$が存在して,任意の$x\in R$に対し,~$x*1=1*x=x$が成立する.
		\item 任意の$x,y,z\in R$に対し,~$x*(y+z)=x*y+x*z,(x+y)*z=x*z+y*z$が成立する.
	\end{defiterm}
\end{defi}

このとき,演算$+$を加法,~$*$を乗法という.ここでは乗法の可換性を仮定していないことに注意しよう.乗法が可換な環は\textbf{可換環}(commutative ring)と呼ばれ,本ノートの主題である.これ以後\textbf{環の乗法は可換であるとする.}\footnote{非可換環に対するイデアルの定義などは,必要なら適宜環の入門書を見てほしい.}すなわち$x*y=y*x$が常に成り立つとする.環の定義では$R$を記号として使用していたが,以後は可換環のみを取り扱うという気持ちで,またBourbakiに敬意を評して\footnote{7000ページ以上に及ぶ「数学原論」(Éléments de mathématique)を出版し,数学の公理的基礎づけを行った.今使われている記号,概念の多く--- 例えば単射,全射--- はBourbakiが導入したものである.},フランス語で環を表すAnneauの頭文字をとって$A$で表すことにする.

加法の単位元を$0$で表し\textbf{零元}(zero element), $1$を単に\textbf{単位元}という.$0,1,-x$(加法の逆元)は一意的に存在する.零元,単位元については実数などで馴染み深い次の性質がある.

\[\text{任意の}x\in A\text{に対し}0x=0\text{が成立する.}\]
\[\text{任意の}x\in A\text{に対し}(-1)x=-x\text{が成立する.}\]

$x\in A$が\textbf{単元}(unit)であるとは,ある$x^{-1}\in A$が存在して$x^{-1}x=1$が成立することをいう.~$x^{-1}$を$x$の（乗法）\textbf{逆元}(inverse element)という.単元のことを\textbf{可逆元}(invertible element)ともいう（意味からはこの名称のほうが直感的である）. その意味で, $x$が単元であることを\textbf{可逆である}と表現することもある. $A$の単元全体は群になり, $A^\times$とかく.これを\textbf{単元群}(group of units)という.\index{たんげんぐん@単元群}\index{たんげん@単元} どれくらい$A$が単元を持つかというのは大切な問題であって,単元になりえない$0$以外がすべて単元である環を\textbf{体}という.

\begin{defi}[体]\index{たい@体}
	環$A$の0以外の元がすべて単元であるとき, $A$を\textbf{体}(field)という.
\end{defi}

体という日本語はドイツ語のK\uml{o}perに由来する.体はよく$K$でかかれる.体でない環の例として$\Z$, 体の例として$\Q,\R,\Co$を与えておこう.

\begin{defi}[環準同型]\index{かんじゅんどうけい@環準同型}
	$A,B$を環とし,~$f$を$f:A\to B$なる写像とする.以下の条件;
	\begin{defiterm}{RH}
		\item 任意の$x,y\in A$に対し,~$f(x+y)=f(x)+f(y)$が成立する.
		\item 任意の$x,y\in A$に対し,~$f(xy)=f(x)f(y)$が成立する.
		\item 単位元について$f(1)=1$が成立する.
	\end{defiterm}
	
	を満たすとき, $f$を\textbf{環準同型}(ring homomorphism)であるという.
\end{defi}

さらに$f$が全単射であるとき$A$と$B$は\textbf{同型}(isomophic)であるといい,~$A\cong B$で表す. 環準同型写像$f$について;

\begin{sakura}
	\item 零元について$f(0)=0$.
	\item 任意の$x\in A$に対し$f(-x)=-f(x)$である.
	\item 任意の$x\in A$に対し$f(x^{-1})=f(x)^{-1}$である.
\end{sakura}
が成り立つ.

$A$を環とし,集合として$A'\subset A$とする.~$A'$が$A$の単位元を含み,和,積,逆元をとる操作で閉じているとき, $A'$を$A$の\textbf{部分環}(sub ring)であるという.環準同型$f:A\to B$があるとき;
\[\im f=\mkset{f(x)}{x\in A}\]
は$B$の部分環になる.これを$f$の\textbf{像}(image)という.もう１つ部分集合に定義する構造で,部分環と同じくらい（それ以上？）に大切なものに\textbf{イデアル}がある.

\begin{defi}[イデアル]\index{イデアル}
	$A$の部分集合$I$が次の条件;
	\begin{defiterm}{I}
		\item $I$は空でない.
		\item 任意の$x,y\in I$に対し$x+y\in I$である.
		\item 任意の$x\in I$と$r\in A$に対し$rx\in I$である.
	\end{defiterm}
	をみたすとき,~$I$を$A$の\textbf{イデアル}(ideal)という.
\end{defi}

$\{0\},A$は明らかに$A$のイデアルをなす.~$\{0\}$を\textbf{零イデアル}(zero ideal,null ideal)といい,~$A$と零イデアルを$A$の\textbf{自明なイデアル}(trivial ideal)という.\index{じめいないである@自明なイデアル} $A$とことなるイデアルを\textbf{真のイデアル}という.環$A$が自明なイデアルしかイデアルを持たないことと, $A$が体であることは同値である（次に述べる性質から従う）.

イデアルの簡単な性質をまとめておく.
\begin{sakura}
	\item $0\in I$である.
	\item $x\in I$ならば$-x\in I$である.
	\item $1\in I$であることと$I=A$であることは同値.特に$I$は可逆元を含むなら$I=A$である.
\end{sakura}

イデアルの中でも,次に与えられる\textbf{有限生成}なイデアルが扱いやすいだけでなく大切な役割を果たす.

\begin{defi}[有限生成イデアル]\index{ゆうげんせいせいいである@有限生成イデアル}
	$x_1,\dots,x_n\in A$について;
	\[(x_1,\dots,x_m)=\mkset{a_1x_1+\dots+a_nx_n}{a_i\in A}\]
	とおくと, $(x_1,\dots, x_n)$は$A$のイデアルになる.
\end{defi}

この記号のもとに自明なイデアルは$(0),(1)$とかかれる.特に１つの元$x$で生成されるイデアル$(x)$を\textbf{単項イデアル}(principal ideal)ないし\textbf{主イデアル}という（主イデアルは古い用語）.有限生成イデアルを$Ax_1+\dots+Ax_n$とかくこともある.イデアル$I$について$a_1,\dots,a_n\in I$なら$(a_1,\dots,a_n)\subset I$である.また単項イデアル$(x),(y)$について,  $(x)\subset (y)$であることと,ある$a\in A$が存在して$x=ay$であることは同値.有限生成イデアル$(a_1,\dots,a_n)$について, $x$を$A$の単元とすると$(a_1,\dots,a_r)=(xa_1,\dots,xa_n)$が成り立つ.

いくつかのイデアルについて,和と積を次のように定義できる.
\begin{defi}[イデアルの和,積]
	$I,J$を$A$のイデアルとする.次の定義により,イデアルの和と積が定まる.
	\[I+J=\mkset{x+y}{x\in I,y\in J}\]
	\[IJ=\mkset{\sum_{\text{有限和}}x_iy_i}{x_i\in I,y_j\in I}\]
\end{defi}

また,イデアルの族$\{I_\lambda\}$について,共通部分$\bigcap I_\lambda$もまたイデアルとなる.集合としては;
\[IJ\subset I\cap J I,J\subset I+J\]
となる. $I\cup J$はイデアルとは限らないことに注意しよう. $I+J=A$となるとき, $I,J$は\textbf{互いに素}(coprime)であるという.


\begin{exer}
	これまでに述べたことについて,環$\Z$において例を挙げてみよ.
\end{exer}

いままでの数学において,\textbf{多項式}(polymonial)は身近な対象であったと思う.環$A$の元を係数にもつ多項式全体を考えると,これは環になる.この環はただの例にとどまらず,環論全体において非常に大切な存在である.

\begin{defi}[多項式環]\index{たこうしきかん@多項式環}
	$A$を環とする. $A$の元を係数とする（変数$X$の）多項式;
	\[f(X)=a_nX^n+a_{n-1}X^{n-1}+\dots+a_0\quad(a_n\neq0)\]
	全体のなす集合$A[X]$は自然な演算によって環になる.これを$A$の（１変数\textbf{多項式環}）という.
\end{defi}
誤解の恐れがない場合,変数はよく省略されて多項式は単に$f$とかかれる.多項式についての用語をいくつか定義しておこう. $a_i$を$f$の$i$次の\textbf{係数}(coeffieient)といい, $a_0$を\textbf{定数項}(constant term)という. $a_n\neq0$となる最大の$n$を$f$の\textbf{次数}(degree)といい, $\deg f$で表す.多項式$f$について,最高次の係数が1,すなわち$f(X)=X^n+a_{n-1}X+\cdots$となっているとき$f$は\textbf{モニック}(monic)であるという.\index{モニック} 次数については明らかに;
\[\deg (f+g)\leq\max{\deg f,\deg g}\]
が成り立つ.

多変数多項式についても同様に考えることができ, ２変数多項式環$A[X,Y]$とは$A[X]$を係数とする変数$Y$の多項式環,すなわち$A[X,Y]=A[X][Y]$のことである.帰納的に$A[X_1,\dots,X_n]$は１変数多項式環をとる操作を繰り返して得られる.ここから,任意の$f\in A[\nitem{X}]$は単項式$X_1^{k_1}\dots X_n^{k_n} (k_i\geq0)$の$A$係数の線形和である.

多項式環の強力さはだんだん学習が進むにつれ身にしみてくることであろうから,次の定義に進もう.通常の計算で当たり前のように用いる$ab=0$なら$a=0$または$b=0$は,例えば多項式環がそうであるように一般の環では\textbf{成り立たない.}

\begin{exer}
	その理由を考えよ.
\end{exer}

一般の環については次のような定義ができ,いわゆる\quo{悪い元}の代表格である.

\begin{defi}[零因子]
	環$A$について,ある$x,y\in A$が存在して$xy=0$かつ$x,y\neq0$となるとき$x,y$を\textbf{零因子}(zero divisor)という.
\end{defi}

逆に,通常の計算のような零因子を持たない環には特別な名前がついている.

\begin{defi}[整域]\index{せいいき@整域}
	可換環$A$が零因子を持たないとき,\textbf{整域}(integral domain)であるという.
\end{defi}

明らかに体は整域である.また整域の部分環も整域である.よく知られた環$\Z$はもちろん整域であり, $\Q,\R,\Co$は体なのでもちろんそうである.

$A$が整域であるとき, $(x)=(y)$であることと, $A$の単元$a$が存在して$x=ay$となることが同値である.一般の環において, $x,y$に対して$A$の単元$a$
が存在して$x=ay$となることは同値関係となる.このことを$x,y$は\textbf{同伴}(associated)であるという.同伴関係と単項イデアルが一致することはすべての環で同値になるわけではないが,整域だけでなく局所環,半局所環で成り立つことが知られている（\ref{defi:半局所環},\ref{prop:半局所環と同伴関係}）.

多項式環については次が成り立つ.

\begin{prop}
	$A$が整域なら, $f,g\in A[X]$について;
	\begin{sakura}
		\item $\deg(fg)=\deg f+\deg g$である.
		\item $A[X]$は整域である.
		\item $A[X]$の単元は$A$の単元である.
	\end{sakura}
\end{prop}

証明は難しくない. (iii)の整域でない環の反例については, 環$A$がある$n\in\Z_+$によって$a^n=0$となる元$a\in A$を持つ（このような$a$を\textbf{冪零}(nilpotent)であるという）とすると$A[X]$において$(1-aX)(a^{n-1}X^{n-1}+\dots+aX-1)=1$となる.

多項式環,整域といったこれらの概念をより彩らせるために,環をイデアルにより\quo{割る}ということが必要である.次章ではそれを説明することにしよう.

\section{剰余環}

環$A$とそのイデアル$I$を考える. $x,y\in A$に対し$x-y\in I$となることを$x\equiv y \pmod I$とかくと,これは同値関係になる.整数$\Z$における\textbf{合同式}を思い出そう. $n$を法とする合同式は,イデアル$n\Z$による同値関係と対応している.その意味でこれは合同式の一般化である.とすると,次の演算も自然だろう. $x\equiv x',y\equiv y'\pmod I$なら;
\[x+y\equiv x'+y'\pmod I,\quad xy\equiv x'y'\pmod I\]
が成り立つ.

これにより, $A$を$I$が定める同値関係で割った商集合$A/I$に次の演算を入れることができる.

\begin{defi}[剰余環]\index{じょうよかん@剰余環}
	$A/I$の元$\bar{x}$すなわち$x$の同値類を$x+I$と表す.演算を;
	\[(x+I)+(y+I)=(x+y)+I,\quad (x+I)(y+I)=xy+I\]
	と定義すると$A/I$は環になる.これを$A$の$I$による\textbf{剰余環}(residue ring)という.
\end{defi}

$A/(0)=A, A/A=0$であることを簡単に確かめられる.

剰余環を用いると,整域でない簡単な例を与えることができる. $\Z$と$n\in\Z$を考える.剰余環$\Z/n\Z$は, $n$が素数のときに限り整域になり,そうでないとき$\Z/n\Z$は非整域になる.例えば$\Z/4\Z$において$2*2=4=0$である.

\begin{exer}
	$\Z/5\Z,\Z/6\Z$の演算表をかけ.
\end{exer}

$p$が素数のとき$\Z/p\Z$は整域だけでなく体になる.この体を特に$\F_p$とかく.またに$\Z/n\Z$が体であることと$n$が素数であることは同値である.

$\Z/n\Z$の例からわかるように,剰余環$A/I$は$I$の元を0とみなしてできる環である.例えば$\Z/3/Z=\{0,1,2\}$であるが,これは一般の$n\in\Z$が$n=a+3b~(0\leq a\leq 2,b\in\Z)$とかけるので, $\Z/3\Z$では$3b=0$となるからである.

これと同様の考えで,たとえば$\R[X]/(X^2+1)$を考えると, $\R[X]$のなかで$X^2=1=0$とみなす環なので$X^2=-1$すなわち$X$は$i$と同一視できる.よって標準的な同型$\R[X]/(X^2+1)\cong\Co$がある.

次に環準同型について着目していこう. $A,B$の間の環準同型$f:A\to B$を考える.集合;
\[\ker f=\mkset{x\in A}{f(x)=0}\]
を$f$の\textbf{核}(kernel)という. $\ker f$は$A$のイデアルをなすことが簡単に確かめられる.よって,剰余環$A\ker f$が定義できる.これが$\im f$と同型になるというのが\textbf{準同型定理}であり,息をするように用いる.

\begin{thm}[準同型定理]
	$A,B$を環とし,準同型$f:A\to B$を考えると,同型$A/\ker f\cong\im f$が存在する.
\end{thm}

\begin{proof}
	剰余環に誘導される準同型;
	\[f':A/\ker f\to\im f;x+\ker f\mapsto f(x)\]
	が環同型を与える.
	\begin{step}
		\item well-definedness.
		
		$x+\ker f=y+\ker f$とすると$x-y\in\ker f$であるので, $f(x-y)=f(x)-f(y)=0$すなわち$f(x)=f(y)$である.
		
		\item 単射性.
		
		$f'(x+\ker f)=0$とすると, $f(x)=0$すなわち$x\in\ker f$である.よって$x+\ker f=0$である.
		
		\item 全射性.
		
		任意の$y\in \im f$をとると,定義からある$x\in A$が存在して$f(x)=y$である.よって$f'(x+\ker f)=y$である.
	\end{step}
\end{proof}

先に挙げた$\R[X]/(X^2+1)\cong \Co$は,準同型$f:\R[X]\to\Co;f(X)\mapsto f(i)$の核が$(X^2+1)$であることから証明できる.

準同型については次の単射判定法が大切である.
\begin{prop}
	環準同型$f:A\to B$について, $f$が単射であることと$\ker f=0$であることが同値である.
\end{prop}

\begin{exer}
	上の命題を示せ.
\end{exer}

体の特徴づけについて,イデアルが自明なものしかない環ということを述べた.この命題から,体$K$からの準同型$f:K\to A$は必ず単射に限ることがわかる.

もともとの環と剰余環の間にはイデアルの対応関係がある.

\begin{prop}[環の対応定理]\label{prop:環の対応定理}
	$A$を環とし, $I$を$A$のイデアルとする.次の２つの集合;
	\[X=\mkset{J:A\text{のイデアル}}{I\subset J},\quad Y=\{A/I\text{のイデアル}\}\]
	の間には１対１の対応がある.
\end{prop}

\begin{proof}
	$\pi:A\to A/I;x\mapsto x+I$を自然な全射とする. $J$を$I$を含む$A$のイデアルとすると, $\pi(J)$は$A/I$のイデアルになることを確かめることができる.よって;
	\[\varphi:X\to Y;J\mapsto\pi(J)\]
	が全単射であることを示せば良い.
	\begin{step}
		\item 単射性.
		
		$\pi(J)=\pi(J')$であるとする.任意の$x\in J$をとる.このとき$\pi(x)\in\pi(J)=\pi(j')$であるので,ある$x'\in J'$が存在して$x-x'\in I$となる.すると$I\subset J'$であるので$x'\in J'$となる.ゆえに$J\subset J'$であり,逆も同様.
		
		\item 全射性.
		
		$A/I$のイデアル$\bar{J}$をとる. $J=\pi^{-1}(\bar{J})$とおく. $\pi^{-1}(0)=I$であるので$I\subset J$は明らか. $J$が$A$のイデアルをなすことも確かめられる. $\pi$が全射なので,これにより$\pi(J)=\bar{J}$となる.
	\end{step}
\end{proof}

特別なイデアルについて,次のような定義をする.

\begin{defi}[素イデアル]\index{そいである@素イデアル}
	環$A$の真のイデアル$P$について,任意の$x,y\in A$に対して$xy\in P$ならば$x\in P$または$y\in P$が成り立つとき$P$を\textbf{素イデアル}(prime ideal)という.
\end{defi}

環$A$の素イデアル全体を$\spec A$とかく.例えば$\spec \Z=\mkset{(p)}{p=0\text{または}p\text{は素数}}$である.素イデアルという言葉を用いると,環$A$が整域であることと$(0)$が素イデアルであることは同値である.

\begin{defi}[極大イデアル]\index{きょくだいいである@極大イデアル}
	環$A$の真のイデアル$\ideal{m}$について, $\ideal{m}\subset I\subset A$となる真のイデアル$I$は$\ideal{m}$に限るとき, $\ideal{m}$を\textbf{極大イデアル}(maximal ideal)という.
\end{defi}

環$A$の極大イデアル全体を$\specm A$とかく.

\begin{exer}
	$\specm \Z$を決定せよ.
\end{exer}

環の対応定理により,次の特徴づけが得られる.

\begin{prop}
	$A$を環とする.
	\begin{sakura}
		\item $P$が$A$の素イデアルであることと, $A/P$が整域であることは同値.
		\item $\ideal{m}$が$A$の極大イデアルであることと, $A/\ideal{m}$が体であることは同値.
	\end{sakura}
\end{prop}

\begin{exer}
	対応定理（\ref{prop:環の対応定理})を用いて示せ.
\end{exer}

体は整域であるので,次の系が導かれる.

\begin{cor}
	極大イデアルは素イデアルである.
\end{cor}

環の対応定理は素イデアルに限っても成り立つ.環$A$のイデアル$I$について, $I$を含む素イデアル全体を$V(I)=\mkset{P\in\spec A}{I\subset P}$とかく.

\begin{prop}[素イデアルの対応定理]\label{prop:素イデアルの対応定理}
	$A$を環とし, $I$を$A$のイデアルとする. $V(I)$と$\spec A/I$の間には１対１対応がある.
\end{prop}
\begin{proof}
	対応定理と同様に自然な全射$\pi:A\to A/I$が対応を与える.
	\begin{step}
		\item $\pi(P)$が$A/I$の素イデアルであること.
		
		 $(x+I)(y+I)\in\pi(P)$とする.ある$z\in P$が存在して$xy-z\in I\subset P$であるので, $xy\in P$である. $P$は素イデアルだから$x\in P$または$y\in P$すなわち$x+I\in\pi(P)$または$y+I\in\pi(P)$である.
		
		\item $\pi^{-1}(\bar{P})$が素イデアルであること.
		
		$xy\in\pi^{-1}(\bar{P})$とすると, $\pi(xy)=\pi(x)\pi(y)\in\bar{P}$なので$\pi(x)\in \bar{P}$または$\pi(y)\in \bar{P}$である.すなわち$x\in\pi^{-1}(\bar{P})$または$y\in\pi^{-1}(\bar{P})$となる.
	\end{step}
\end{proof}

この証明と全く同様の方法で,一般の準同型$f:A\to B$について$P\in\spec B$に対して$f^{-1}(P)\in\spec A$を示すことができる.しかし,極大イデアルの引き戻しが極大とは限らない.例えば$\Z\hookrightarrow\Q$の$(0)$の引き戻しを考えよ.

選択公理（Zornの補題）を認めることで,すべてのイデアルに対してそれを含む極大イデアル（素イデアル）の存在を保証できる.

\begin{thm}[Krullの極大イデアル存在定理]\index{#Krullのきょくだいいであるそざ@Krullの極大イデアル存在定理}
	環$A$の真のイデアル$I$について, $I$を含む極大イデアル$\ideal{m}$が存在する.
\end{thm}

\begin{proof}
	次の集合;
	\[\Sigma=\mkset{J:A\text{の真のイデアル}}{I\subset J}\]
	は$I$を含むので空ではない. $\Sigma$は包含関係で帰納的順序集合をなす.実際$X$を$\Sigma$の全順序部分集合とすると, $\ideal{m}_0=\bigcup_{\ideal{m}\in X}\ideal{m}$が$A$の真のイデアルをなし, $X$の極大元となる.よってZornの補題より$\Sigma$は極大元をもち,それが$I$を含む極大イデアルとなる.
\end{proof}

次に,環の\textbf{標数}と呼ばれる概念について説明しよう.一般の環についても,元$x\in A$の整数倍を$x$を何回足したかどうかによって定義することができる.例えば$3x=x+x+x,-5x=-(x+x+x+x+x)$である.これを用いて次の定義を行う.

\begin{defi}[標数]\index{ひょうすう@標数}
	$A$を環とする.単位元$1$について, $n1=0$となる$n\in\Z_+$が存在するとき, そのような$n$で最小のものを$A$の\textbf{標数}(characteristic number)であるといい, $\Char(A)=n$とかく.そのような$n$が存在しない場合$\Char(A)=0$という.
\end{defi}

例えば$\Char \Z=0,\Char(\Z/n\Z)=n$である.

整域については次のような結果がある.

\begin{prop}
	$A$を整域とすると, $A$の標数は$0$か素数$p$に限る.
\end{prop}

\begin{proof}
	次の準同型;
	\[f:\Z\to A;n\mapsto n1\]
	を考える.準同型定理から$\Z/\ker f$は$A$の部分環$\im f$に同型であり, $A$は整域なので$\Z/\ker f$は整域.よって$\ker f$は$\Z$の素イデアルなので$(0)$か$(p)$でなければならない.標数は$\ker f$の生成元にほかならないので, $0$または素数$p$である.
\end{proof}

\section{ED,PID,UFD}
整数環$\Z$の持つ性質を一般の環に抽象化することで, ED,PID,UFDなどの良い性質が得られる.本節ではそれについて説明する.

\begin{defi}[PID]\index{#PID@PID}
	環$A$のすべてのイデアルが単項イデアルであるとき, $A$を\textbf{主環}(principal ring)という.特に$A$が整域のとき,\textbf{単項イデアル整域}(principal ideal domain)という.頭文字をとってPIDと略する.
\end{defi}

$\Z$はPIDである.実際,任意のイデアル$I$について, $n\in I$を$I$の元でもっとも絶対値が小さいものとする.イデアルの定義から$n\in\N$としてよい.このとき,除法の原理から任意の$x\in I$は$x=qn+r~(q\in\Z,0\leq r<n)$と一意にかける.すると$r=x-qn\in I$であり, $n$の最小性から$r=0$となり, $m\in n\Z$である.よって$I=n\Z$である.この証明で本質的なのは\textbf{除法の原理}である.これを一般化することでPIDの判定条件を１つ与えよう.

\begin{defi}[Euclid整域]\index{#Euclid せいいき@Euclid整域,ED}
	$A$を整域とする.写像$\rho:A\to\N$で,次の条件;
	\begin{defiterm}{EF}
		\item 任意の$0$でない$x\in A$について, $\rho(0)<\rho(x)$が成り立つ.
		\item 任意の$x,y\in A$について, $x\neq0$のときある$q,r\in A$が存在して;
		\[y=xq+r,\quad \rho(r)<\rho(x)\]
		となる.
	\end{defiterm}
	を満たすものが存在するとき, $\rho$をEulcid\textbf{関数}(Euclid function), $A$をEuclid\textbf{整域}, ED(Euclid domain)という.
\end{defi}

除法の原理によって,絶対値を与える関数$\Z\to\N$がEuclid関数となり$\Z$はEDである.
\begin{exer}
	体$K$上の多項式環$K[X]$は,次数を与える写像によってEDとなることを示せ.	
\end{exer}

先に述べた通り, EDならばPIDである.
\begin{thm}
	EDはPIDである.
\end{thm}
\begin{proof}
	$A$をEDとし, $\rho:A\to\N$をEuclid関数とする.任意のイデアル$I$をとる. $I-\{0\}$の$\rho$による像;
	\[I'=\mkset{\rho(x)}{0\neq x\in I}\]
	を考える. $I'\subset\N$であり, $\N$は整列集合なので最小元$m'=\min I'$が存在する. $m'\in I'$より,ある$0\neq m\in I$が存在して$\rho(m)=m'$である. $I=Am$を示そう.任意の$x\in I$をとる. $A$はEDなので, $m\neq0$だからある$q,r\in A$が存在して;
	\[x=qm+r,\quad \rho(r)<\rho(m)=m'\]
	とかける.ここで$r=x-qm\in I$であり, $\rho(r)<m'$であるから$\rho(r)\not\in I'$である.ゆえに$r=0$でなければならない.よって$x\in Am$である.ゆえに$I=Am$が示された.
\end{proof}

よって$K[X]$がPIDであることがわかる. PIDは１変数特有の現象で,２変数以上ではPIDにならない（例えば$(X,Y)$が単項ではない）.

PIDの素イデアルについては次の命題が知られている.
\begin{prop}
	$A$をPIPとする. $P$を$A$の素イデアルとすると, $P$は$(0)$または極大イデアルである.
\end{prop}
\begin{proof}
	$P=(p)$とする. $p=0$なら示すことはない. $p\neq0$としよう.もし$(p)\subset (x)$となる$x\in A$が存在したとする. $p=ax$とかける.すると$ax\in (p)$より$a\in (p)$または$x\in (p)$である.  $x\in (p)$なら$(x)=(p)$である.また$a\in (p)$とすると, $a=a'p$となる$a'\in A$が存在する.よって$p=aa'p$となり, $p\neq0$より$aa'=1$である.よって$p$と$x$は同伴であり$(p)=(x)$である.以上より$(p)$は極大である.
\end{proof}

PIDは$\Z$における最大公約数の議論を行えるように抽象化した環になっている.もちろん一般の環でも約数,倍数といった概念は定義できるが, PIDでは嬉しい性質があることを見ていこう. 

\begin{defi}[約元,倍元]
	$A$を環とする. $x,y\in A$について,ある$a\in A$が存在して$x=ya$となるとき$x$は$y$の\textbf{約元}(divisor), $y$は$x$の\textbf{倍元}(multiple)であるという.
\end{defi}

$z\in A$が$x,y$の共通の約元であるとき $z$は$x,y$の\textbf{公約元}(common divisor)であるといい, $g$が$x,y$の公約元であって,任意の$x,y$の公約元の倍元であるとき$g$を$x,y$の\textbf{最大公約元}(greatest common divisor)であるという. $\Z$ですら最大公約元は一意に決まらない（例えば$12$と$18$の最大公約数は$6,-6$）し,一般の整域では存在するかもわからない.

\begin{prop}
	$A$がPIDであるとき,任意の$x,y\in A$について最大公約元$g$が少なくとも1つ存在する.
\end{prop}

\begin{proof}
	イデアル$(x,y)$を考えると, $A$はPIDなので$(x,y)=(g)$となる$g\in A$が存在する.この$g$が$x,y$の最大公約元になる.公約元になることは$x,y\in(g)$からわかる.次に$z$を$x,y$の公約元とすると,定義から$x,y\in (z)$なので$(g)=(x,y)\subset (z)$である.ゆえに$z$は$g$の約元である.
\end{proof}

このアイデアから次の強力な定理を証明できる.
\begin{thm}
	$A$をPIDとし, $a,b\in A$を0でない元とする. $a,b$の最大公約元を$g$とすると,２変数１次方程式;
	\[ax+by=g\]
	の解$(x,y)$が$A$の中に見つかる.
\end{thm}

\begin{proof}
	$g,g'$が$a,b$の最大公約元であるとする.このとき$g,g'$はともに0でなく,お互いの約元である.よって$u,t\in A$が存在して$g=g't,g'=gu$とかける.すると$g(1-ut)=0$であるが, $A$が整域なので$g\neq0$より$ut=1$である.ゆえに$g,g'$は互いの単元倍である.すると, $(a,b)=(d)$となる$d\in A$をとると先の命題より$d$は$a,b$の最大公約元であって, $g$の単元倍であるので$(a,b)=(d)=(g)$が従う.よって$g\in (a,b)$であるから主張が従う.
\end{proof}

約数の一般化として約元を定義したのと同様に,素数の一般化を考えてみよう.

\begin{defi}[既約元]\index{きやくげん@既約元}
	$A$を環とし, $x\in A$を単元でないとする.ここで$a,b\in A$を用いて$x=ab$とかけるとき,必ず$a$または$b$が単元であるとき, $x$を\textbf{既約}(irreducible)であるという.
\end{defi}

$\Z$の単元は$1,-1$のみであるので, $\Z$の既約元はまさに素数（の単元倍）である. $\Z$においては,単元倍を除いて一意的に素因数分解できる.一般の整域では既約元分解は必ずできるが,一意性は成り立つとは限らない.例えば$\Z[X]$に$\sqrt{-5}$を代入して得られる（$\Z[X]/(X^2+5)$と表現してもよい）;
\[\Z[\sqrt{-5}]=\mkset{a+b\sqrt{-5}}{a,b\in\Z}\]
を考えると,次の等式;
\[6=2\cdot 3=(1-\sqrt{-5})(1+\sqrt{-5})\]
が成り立つ.また$2,3,1-\sqrt{-5},1+\sqrt{-5}$が$\Z[\sqrt{-5}]$の既約元であることを確かめることができる.

このようなことが起こりえない,すなわち任意の元を一意的に既約元に分解できる環をUFDという.

\begin{defi}[UFD]\index{#UFD@UFD}
	整域$A$の$0$と単元以外のすべての元が既約元に（単元倍を除いて）一意的に分解できるとき, $A$を\textbf{一意分解整域}, UFD(unique factorization domain)という.
\end{defi}

UFDの例を与えるために, UFDの性質をいくつか見ていく必要がある.まずUFDでは$f$が既約元であるかどうかを次のように判定できることを示そう.
\begin{prop}
	$A$をUFDとする.このとき$f\neq0$が既約元であることと$(f)$が素イデアルであることは同値である.
\end{prop}
\begin{proof}
	\begin{eqv}
		\item $xy\in(f)$とする.定義よりある$a\in A$が存在して$xy=af$となる.ここで$x,y,a$を既約分解して$x=ux_1\dots x_n,y=ty_1\dots y_m,a=sa_1\dots a_l~(u,t,s$は$A$の単元)としよう.このとき;
		\[utx_1\dots x_ny_1\dots y_m=sa_1\dots a_lf\]
		において,両辺はともに$xy$（ないし$af$）の既約分解になっているので, $f$は$\nitem{x},\nitem[m]{y}$のどれかの単元倍である.よって$x\in(f)$または$y\in(f)$が成り立つ.
		
		\item $(f)$が素イデアルとすると,もし$xy=f$とかけたなら$x\in (f)$または$y\in(f)$である. $x\in (f)$であるとすると$x=af$とかけるので, $f(1-ay)=0$である. $f\neq0$より$1=ay$であり, $y$は単元である. $y\in (f)$なら同様に$x$が単元となるので, $f$は既約元である.
	\end{eqv}
\end{proof}

$(\Longleftarrow)$は一般の整域でも成り立つ.整域において, $(f)$が素イデアルとなるような$f$のことを\textbf{素元}(prime element)という.実は次の命題が成り立つ.

\begin{prop}
	$A$を整域とする. $x\in A$が素元の２通りの積;
	\[x=up_1\dots p_n=tp_1'\dots p_m'~(u,t\in A^\times)\]
	にかけたとすると, $n=m$であり適当に並べ替えると$(p_i)=(p_i')$が必ず成立する（$p_i'$は$p_i$の単元倍である）.
\end{prop}

\begin{proof}
	$p_1'\dots p_m'\in (p_1)$であるので, $p_1'\in (p_1)$または$p_2'\dots p_m'\in (p_1)$である.これを続けることで,ある$p_i'$について$p_i'\in (p_1)$とできる.それを並び替えて$p_1'$としよう.ここで$p_1$も$p_1'$も既約であるから,単元$u\in A$が存在して$p_1'=p_1u$である.すなわち$p_2p_3\dots p_n=up_2'\dots p_m'$である.同様の操作を繰り返すことで$n=m$であり, $p_i'$は$p_i$の単元倍すなわち$(p_i')=(p_i)$であることを得る.
\end{proof}

一般に素元は既約元であったから,この命題より素元に分解できることを確かめさえすればよいということになる.これを用いて次を示そう.
\begin{thm}
	PIDはUFDである.
\end{thm}

\begin{proof}
	$A$をPIDとし, $x\neq0$を単元でないとする.このとき真のイデアル$(x)$を含む極大イデアル$\ideal{m}$が存在する（Krullの極大イデアル存在定理を使ってもよいが, PIDはNoether環と呼ばれる環（\ref{defi:Noether環}）であることに注意すると,選択公理は不要である）. $A$はPIDなので, $\ideal{m}=(p_1)$となる$p_1\in A$が存在する. $x\in(p_1)$であるから$x=a_1p_1$となる$a_1\in A$が存在する. $a_1$が単元ならば$x$は素元であり証明が終了する. $a_1$が単元でないならば,同様の操作により$x=a_2p_1p_2$となる素元$p_2$が見つかる.この操作が有限回で終了することを示そう.この操作が無限回続いたとすると,無限に続く非単元の族$\{a_i\}$で, $(a_i)\subsetneq (a_{i+1})$となるものがとれる.すると;
	\[I=\bigcup_{i=1}^\infty (a_i)\]
	もまた$A$のイデアルになる.すると$A$はPIDなので$I=(a_\infty)$となる$a_\infty\in A$が存在する.構成より$a_\infty\in (a_n)$となる$n$が存在するが,これは$I=(a_n)=(a_{n+1})=\cdots$を導くので矛盾.よってこの操作は有限回で終了する.
\end{proof}

操作が有限回で終了する,というところは本質的にはすべてのイデアルが有限生成である,ということから来ている（Noether性について勉強したときにわかるだろう）.

これにより$\Z$や体係数の多項式環$K[X]$はUFDである. EDもあわせて考えると,次のような流れになっている.

\[\text{体}\Longrightarrow\text{ED}\Longrightarrow\text{PID}\Longrightarrow\text{UFD}\Longrightarrow\text{整域}\Longrightarrow\text{環}\]

体上の多変数多項式はPIDではなかったが, UFDであることを示すことができる（\ref{cor:多変数もUFD}）. これはUFDだがPIDでない例を与える.


